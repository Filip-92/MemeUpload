<div id="comment" class="mb-3 text-center" *ngIf="(accountService.currentUser$ | async) !== null">
    <table class="table">
        <td style="width: 10%"><img src="{{url || '././assets/LogoImage.png'}}" alt=""></td>
        <td style="width: 5%;"><a routerLink='/members/{{comment.username}}'>{{comment.username}}</a></td>
        <td style="width: 15%;">{{comment.uploaded | timeago}}</td>
        <span>
            <td style="width: 50%;">{{comment.content}}</td>
        </span>
        <td style="width: 3%;"><button id="like" [disabled]="disliked" (click)="addLike(comment)"><i class="fa fa-plus" [ngStyle]="!liked ? { 'color': 'white' } : { 'color': 'green' }"></i></button></td>
        <td style="width: 3%;">{{comment.numberOfLikes}}</td>
        <td style="width: 3%;"><button id="like" [disabled]="liked" (click)="addDislike(comment)"><i class="fa fa-minus" [ngStyle]="!disliked ? { 'color': 'white' } : { 'color': 'red' }"></i></button></td>
        <td style="width: 10%" *ngIf="comment.username === user.username">
            <button class="btn btn-success mb-2" (click)="editCommentToggle(comment.id) && reloadComments(comment)">Edytuj</button>
            <button class="btn btn-danger" (click)="removeComment(comment.id) && reloadComments(comment)">Usuń</button>
        </td>
    </table>
    <div class="text-center">
        <img src="{{comment.url}}" alt="">
    </div>
    <i class="fa fa-reply ml-3 mb-1" *ngIf="!replyQuote" (click)="addReply(comment.id)"> Odpowiedz</i>
    <i class="fa fa-quote-left ml-3 mb-1" *ngIf="!reply" (click)="addQuotedReply(comment.id)"> Zacytuj</i>
</div>

<div *ngIf="commentUpdate">
    <div class="text-center">
        <form [formGroup]='editForm' (ngSubmit)="editForm.valid && editComment(comment.id)" class="text-center column">
            <textarea type="text" [formControl]='editForm.controls["content"]' placeholder="{{comment.content}}" class="col-7"></textarea>
            <button class="btn btn-success ml-2 col-2" type="submit" [disabled]="!editForm.valid" style="margin-bottom: 40px;">Edytuj komentarz</button>
        </form>
    </div>
</div>

<div id="comment" class="mb-3 text-center" *ngIf="(accountService.currentUser$ | async) === null">
    <table class="table mb-3">
        <td style="width: 10%"><img src="{{url || '././assets/LogoImage.png'}}" alt=""></td>
        <td style="width: 5%;"><a routerLink='/members/{{comment.username}}'>{{comment.username}}</a></td>
        <td style="width: 15%;">{{comment.uploaded | timeago}}</td>
        <span>
            <td style="width: 50%;">{{comment.content}}</td>
        </span>
        <td style="width: 3%;"><button id="like" [disabled]><i class="fa fa-plus" [ngStyle]="!liked ? { 'color': 'white' } : { 'color': 'green' }"></i></button></td>
        <td style="width: 3%;">{{comment.numberOfLikes}}</td>
        <td style="width: 3%;"><button id="like" [disabled]><i class="fa fa-minus" [ngStyle]="!disliked ? { 'color': 'white' } : { 'color': 'red' }"></i></button></td>
    </table>
    <div class="text-center">
        <img src="{{comment.url}}" alt="">
    </div>
</div>
<div id="reply" style="border-left: 1px solid white;">
    <div *ngFor="let reply of replies">
        <app-reply [reply]="reply"></app-reply>
    </div>
</div>

<div *ngIf="reply">
    <form [formGroup]='replyForm' (ngSubmit)="replyForm.valid && replyComment()" class="text-center column">
        <div>
            <textarea type="text" [formControl]='replyForm.controls["content"]' placeholder="Wpisz treść komentarza" class="col-7"></textarea>
            <button class="btn btn-success ml-2 col-2" type="submit" [disabled]="!replyForm.valid" style="margin-bottom: 40px;">Dodaj komentarz</button>
        </div>
        <div *ngIf="replyForm.controls['content'].errors?.maxlength" class="text-danger">
            Komentarz zbyt długi
        </div>
    </form>
</div>

<div *ngIf="replyQuote">
    <form [formGroup]='replyForm' (ngSubmit)="replyForm.valid && replyComment()" class="text-center column">
        <div>
            <textarea type="text" [formControl]='replyForm.controls["content"]' placeholder="Wpisz treść komentarza" class="col-7"></textarea>
            <button class="btn btn-success ml-2 col-2" type="submit" [disabled]="!replyForm.valid" style="margin-bottom: 40px;">Dodaj komentarz</button>
        </div>
        <div *ngIf="replyForm.controls['content'].errors?.maxlength" class="text-danger">
            Komentarz zbyt długi
        </div>
    </form>
</div>

